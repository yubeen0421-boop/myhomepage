<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>✨ TWS 스타일 테스트</title>
    <!-- Tailwind CSS 로드 -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* TWS의 청량한 느낌을 살린 배경 그라데이션 */
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #e0f7fa 0%, #b3e5fc 100%);
        }
        .app-container {
            max-width: 600px;
        }
        /* 버튼 공통 스타일 */
        .btn-answer {
            transition: all 0.2s ease-in-out;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        .btn-answer:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 10px rgba(0, 0, 0, 0.15);
            background-color: #00bcd4; /* TWS 포인트 컬러 */
            color: white !important;
        }
        /* 로딩 스피너 (API 호출 시 사용 가능) */
        .spinner {
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-top: 4px solid #00bcd4;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="p-4 flex items-center justify-center min-h-screen">

    <div id="app-container" class="app-container bg-white p-6 md:p-10 rounded-xl shadow-2xl w-full">
        <header class="mb-8 text-center">
            <h1 class="text-3xl font-extrabold text-[#00bcd4] mb-2 md:text-4xl">
                ✨ TWS 스타일 찾기 테스트 ✨
            </h1>
            <p class="text-gray-500 text-sm">당신의 보이후드 팝 무드 진단</p>
        </header>

        <!-- 1. 시작 화면 -->
        <div id="start-page" class="text-center transition-opacity duration-500">
            <p class="text-lg mb-8 text-gray-600">
                일상의 모든 순간을 특별하게 만드는, 당신만의 TWS 스타일은 무엇일까요?
            </p>
            <button id="start-button" class="w-full bg-[#00bcd4] hover:bg-[#0097a7] text-white font-bold py-3 rounded-full text-xl shadow-lg transition duration-300">
                테스트 시작
            </button>
        </div>

        <!-- 2. 질문 화면 -->
        <div id="question-page" class="hidden transition-opacity duration-500">
            <div class="mb-6">
                <div class="w-full bg-gray-200 rounded-full h-2.5">
                    <div id="progress-bar" class="bg-[#00bcd4] h-2.5 rounded-full transition-all duration-300" style="width: 0%"></div>
                </div>
                <p id="progress-text" class="text-sm text-gray-500 mt-2 text-right">0/8</p>
            </div>

            <h2 id="question-text" class="text-xl md:text-2xl font-semibold text-gray-800 mb-8 min-h-[60px] flex items-center justify-center text-center">
                <!-- 질문 내용이 들어갈 자리 -->
            </h2>

            <div id="answer-buttons" class="space-y-4">
                <!-- 답변 버튼들이 여기에 추가됩니다 -->
            </div>
        </div>

        <!-- 3. 결과 화면 -->
        <div id="result-page" class="hidden text-center transition-opacity duration-500">
            <div id="loading-spinner" class="hidden">
                <div class="spinner"></div>
                <p class="text-gray-600 mt-4">결과를 분석 중입니다...</p>
            </div>
            
            <div id="result-content" class="hidden">
                <h2 class="text-2xl font-bold text-[#00bcd4] mb-4">
                    🎉 당신의 TWS 스타일은?
                </h2>
                <div class="p-6 bg-[#f0f8ff] border-2 border-[#b3e5fc] rounded-xl shadow-md">
                    <!-- 결과 이미지 (플레이스홀더) -->
                    <img id="result-image" src="https://placehold.co/400x200/b3e5fc/00bcd4?text=TWS+Style" 
                         onerror="this.onerror=null; this.src='https://placehold.co/400x200/b3e5fc/00bcd4?text=Style+Image';"
                         alt="테스트 결과 이미지" class="w-full h-auto rounded-lg mb-4 object-cover">
                    
                    <h3 id="result-title" class="text-2xl font-extrabold text-[#00bcd4] mb-2"></h3>
                    <p id="result-type" class="text-sm font-medium text-gray-700 mb-4"></p>
                    <p id="result-description" class="text-gray-600 leading-relaxed"></p>
                </div>
                
                <button id="restart-button" class="w-full mt-8 bg-gray-400 hover:bg-gray-500 text-white font-bold py-3 rounded-full text-lg transition duration-300">
                    다시 테스트하기
                </button>
            </div>
        </div>
    </div>

    <script>
        // 질문 데이터 (MBTI 4쌍에 대한 2개씩, 총 8개 질문)
        const questions = [
            // E-I (외향-내향)
            { id: 1, text: "새로운 모임에서 당신은 주로 어떤 역할을 하나요?", 
              answers: [
                  { text: "먼저 다가가 말을 걸고 분위기를 주도한다.", type: 'E' },
                  { text: "조용히 경청하며 대화의 흐름을 관찰한다.", type: 'I' }
              ]},
            { id: 2, text: "재충전이 필요할 때, 당신의 선택은?", 
              answers: [
                  { text: "친구들과 신나는 활동을 하며 에너지를 얻는다.", type: 'E' },
                  { text: "혼자만의 시간을 가지며 깊이 생각한다.", type: 'I' }
              ]},

            // S-N (감각-직관)
            { id: 3, text: "새로운 아이디어를 구상할 때, 당신은?", 
              answers: [
                  { text: "현실적인 실행 단계와 구체적인 자료부터 검토한다.", type: 'S' },
                  { text: "미래의 가능성과 숨겨진 의미를 먼저 상상한다.", type: 'N' }
              ]},
            { id: 4, text: "친구가 긴 이야기를 할 때, 당신이 집중하는 것은?", 
              answers: [
                  { text: "지금 일어난 일의 정확한 디테일과 사실 관계.", type: 'S' },
                  { text: "그 이야기가 내포하는 전체적인 메시지와 영감.", type: 'N' }
              ]},

            // T-F (사고-감정)
            { id: 5, text: "친구가 힘든 고민을 털어놓았을 때, 당신의 첫 반응은?", 
              answers: [
                  { text: "상황을 객관적으로 분석하고 합리적인 해결책을 제시한다.", type: 'T' },
                  { text: "친구의 기분을 먼저 살피고 감정에 깊이 공감한다.", type: 'F' }
              ]},
            { id: 6, text: "당신이 누군가를 평가하는 가장 중요한 기준은?", 
              answers: [
                  { text: "논리적 일관성과 효율적인 업무 능력.", type: 'T' },
                  { text: "따뜻한 마음씨와 인간적인 배려심.", type: 'F' }
              ]},
            
            // J-P (판단-인식)
            { id: 7, text: "여행 계획을 세울 때, 당신의 스타일은?", 
              answers: [
                  { text: "여행 전 모든 일정을 짜고 계획대로 움직이는 것을 선호한다.", type: 'J' },
                  { text: "큰 틀만 잡고 그때그때 끌리는 대로 즉흥적으로 행동한다.", type: 'P' }
              ]},
            { id: 8, text: "해야 할 일이 생겼을 때, 당신은?", 
              answers: [
                  { text: "미루지 않고 미리 시작해서 깔끔하게 처리한다.", type: 'J' },
                  { text: "마감이 임박해야 집중이 잘 되고 역량이 발휘된다.", type: 'P' }
              ]}
        ];

        // MBTI 유형별 TWS 스타일 매핑 (4가지 아키타입)
        const resultsMap = {
            'A': { title: "청량 폭발! 활동적인 '스프라이트 보이'", mbti: "E, P 타입", description: "당신은 TWS의 타이틀곡처럼 활기차고 에너지 넘치는 존재입니다. 새로운 곳을 탐험하고, 사람들과 어울리며 순간을 즐기는 것을 좋아해요. 당신의 긍정적인 에너지는 주변 사람들에게 시원한 청량감을 선사합니다.", image: "https://placehold.co/400x200/c7e8f5/00bcd4?text=Refreshing+Boy" }, // ESTP, ESFP, ENFP, ENFJ
            'B': { title: "감성 가득! 사색하는 '낭만주의 소년'", mbti: "I, F 타입", description: "당신은 TWS의 B-side 트랙처럼 깊은 감성과 내면의 세계를 가졌습니다. 조용히 생각하고, 섬세한 감각으로 세상의 아름다움을 발견하는 낭만주의자입니다. 당신의 따뜻함은 조용히 주변을 위로합니다.", image: "https://placehold.co/400x200/f5e0c7/d48900?text=Dreamy+Artist" }, // INFP, INFJ, ISFP, ISTP (F 성향이 강함)
            'C': { title: "차분하고 믿음직한 '모범생 소년'", mbti: "I, J 타입", description: "당신은 TWS 멤버들처럼 신뢰감을 주는 모범적인 스타일입니다. 계획적이고 책임감이 강해 맡은 일은 빈틈없이 해냅니다. 겉으로는 차분하지만, 속으로는 친구들을 아끼는 든든한 마음을 가졌습니다.", image: "https://placehold.co/400x200/e0f5c7/4dd400?text=Reliable+Student" }, // ISTJ, ISFJ, INTJ, INFJ (I, J 성향이 강함)
            'D': { title: "호기심 넘치는 '트렌디 크리에이터'", mbti: "E, N, T 타입", description: "당신은 틀에 박히지 않은 독창적인 매력의 소유자입니다. 논리적이면서도 기발한 아이디어를 끊임없이 내놓으며 트렌드를 이끌어갑니다. 당신과의 시간은 항상 신선하고 흥미진진합니다.", image: "https://placehold.co/400x200/c7f5e0/00d489?text=Trendy+Creator" } // ENTP, ENTJ, ESTJ, ESFJ (T, N 성향이 강함)
        };

        const resultMappingRule = (mbti) => {
            const [E_I, S_N, T_F, J_P] = mbti.split('');

            if ((E_I === 'E' || J_P === 'P') && (T_F === 'F' || S_N === 'N')) return 'A'; // Refreshing (활동적이고 감성적)
            if (E_I === 'I' && T_F === 'F' && S_N === 'N') return 'B'; // Dreamy (내향적이고 감성적/직관적)
            if (E_I === 'I' && T_F === 'T' && J_P === 'J') return 'C'; // Reliable (내향적이고 이성적/계획적)
            if (E_I === 'E' && T_F === 'T' && S_N === 'S') return 'D'; // Trendy (외향적이고 이성적/현실적)
            
            // 복잡한 경우를 위한 기본값 설정
            if (E_I === 'E') return 'A';
            if (J_P === 'J') return 'C';
            if (T_F === 'F') return 'B';
            return 'D';
        };

        // DOM 요소 가져오기
        const startPage = document.getElementById('start-page');
        const questionPage = document.getElementById('question-page');
        const resultPage = document.getElementById('result-page');
        const startButton = document.getElementById('start-button');
        const restartButton = document.getElementById('restart-button');
        const questionText = document.getElementById('question-text');
        const answerButtonsDiv = document.getElementById('answer-buttons');
        const progressBar = document.getElementById('progress-bar');
        const progressText = document.getElementById('progress-text');
        const resultTitle = document.getElementById('result-title');
        const resultDescription = document.getElementById('result-description');
        const resultType = document.getElementById('result-type');
        const resultContent = document.getElementById('result-content');
        const loadingSpinner = document.getElementById('loading-spinner');

        let currentQuestionIndex = 0;
        let scores = { 'E': 0, 'I': 0, 'S': 0, 'N': 0, 'T': 0, 'F': 0, 'J': 0, 'P': 0 };

        // 이벤트 리스너 등록
        startButton.addEventListener('click', startTest);
        restartButton.addEventListener('click', startTest);

        function startTest() {
            currentQuestionIndex = 0;
            scores = { 'E': 0, 'I': 0, 'S': 0, 'N': 0, 'T': 0, 'F': 0, 'J': 0, 'P': 0 };

            startPage.classList.add('hidden');
            resultPage.classList.add('hidden');
            resultContent.classList.add('hidden');
            loadingSpinner.classList.add('hidden');
            questionPage.classList.remove('hidden');

            loadQuestion();
        }

        function loadQuestion() {
            if (currentQuestionIndex < questions.length) {
                const q = questions[currentQuestionIndex];
                
                questionText.textContent = q.text;

                answerButtonsDiv.innerHTML = '';
                
                q.answers.forEach(answer => {
                    const button = document.createElement('button');
                    button.textContent = answer.text;
                    button.dataset.type = answer.type;
                    button.className = 'btn-answer w-full bg-blue-50 text-gray-700 p-4 rounded-xl text-lg font-medium text-left'; 
                    button.addEventListener('click', handleAnswer);
                    answerButtonsDiv.appendChild(button);
                });

                updateProgressBar();
            } else {
                showResult();
            }
        }

        function handleAnswer(event) {
            const selectedType = event.target.dataset.type;
            scores[selectedType]++;

            currentQuestionIndex++;
            loadQuestion();
        }

        function updateProgressBar() {
            const progress = (currentQuestionIndex / questions.length) * 100;
            progressBar.style.width = `${progress}%`;
            progressText.textContent = `${currentQuestionIndex}/${questions.length}`;
        }

        function showResult() {
            questionPage.classList.add('hidden');
            resultPage.classList.remove('hidden');
            loadingSpinner.classList.remove('hidden');

            // 1. MBTI 유형 계산
            const mbti = 
                (scores['E'] > scores['I'] ? 'E' : 'I') +
                (scores['S'] > scores['N'] ? 'S' : 'N') +
                (scores['T'] > scores['F'] ? 'T' : 'F') +
                (scores['J'] > scores['P'] ? 'J' : 'P');

            // 2. TWS 스타일 아키타입 매핑
            const archetypeKey = resultMappingRule(mbti);
            const result = resultsMap[archetypeKey];

            // 로딩 시뮬레이션 후 결과 표시
            setTimeout(() => {
                loadingSpinner.classList.add('hidden');
                resultContent.classList.remove('hidden');

                // 결과 화면 업데이트
                resultTitle.textContent = result.title;
                resultDescription.textContent = result.description;
                resultType.textContent = `(MBTI 성향: ${mbti}, 핵심 타입: ${result.mbti})`;

                // 이미지 업데이트 (Tailwind 클래스도 함께)
                const resultImage = document.getElementById('result-image');
                resultImage.src = result.image;
                resultImage.alt = `${result.title} 이미지`;

                // 다시 시작 버튼 색상 변경
                restartButton.className = 'w-full mt-8 bg-[#00bcd4] hover:bg-[#0097a7] text-white font-bold py-3 rounded-full text-lg transition duration-300';
            }, 1500); // 1.5초 로딩 시간 부여
        }

        // 초기 로드 시 시작 화면 표시
        document.addEventListener('DOMContentLoaded', () => {
            // 초기 상태 설정
            startPage.classList.remove('hidden');
        });
    </script>
</body>
</html>
